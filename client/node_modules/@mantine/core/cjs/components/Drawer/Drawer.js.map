{"version":3,"file":"Drawer.js","sources":["../../../src/components/Drawer/Drawer.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useScrollLock, useFocusTrap, useFocusReturn } from '@mantine/hooks';\nimport {\n  useMantineTheme,\n  DefaultProps,\n  MantineNumberSize,\n  MantineShadow,\n  ClassNames,\n  MantineMargin,\n} from '@mantine/styles';\nimport { Paper } from '../Paper/Paper';\nimport { Overlay } from '../Overlay/Overlay';\nimport { Portal } from '../Portal/Portal';\nimport { Text } from '../Text/Text';\nimport { CloseButton } from '../ActionIcon/CloseButton/CloseButton';\nimport { GroupedTransition, MantineTransition } from '../Transition';\nimport useStyles, { DrawerPosition } from './Drawer.styles';\n\nexport type DrawerStylesNames = Exclude<\n  ClassNames<typeof useStyles>,\n  'noOverlay' | 'clickOutsideOverlay'\n>;\n\nexport interface DrawerProps\n  extends Omit<DefaultProps<DrawerStylesNames>, MantineMargin>,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'title'> {\n  /** If true drawer is mounted to the dom */\n  opened: boolean;\n\n  /** Called when drawer is closed (Escape key and click outside, depending on options) */\n  onClose(): void;\n\n  /** Drawer body position */\n  position?: DrawerPosition;\n\n  /** Drawer body width (right | left position) or height (top | bottom position), cannot exceed 100vh for height and 100% for width */\n  size?: string | number;\n\n  /** Drawer body shadow from theme or any css shadow value */\n  shadow?: MantineShadow;\n\n  /** Drawer body padding from theme or number for padding in px */\n  padding?: MantineNumberSize;\n\n  /** Drawer z-index property */\n  zIndex?: number;\n\n  /** Disables focus trap */\n  noFocusTrap?: boolean;\n\n  /** Disables scroll lock */\n  noScrollLock?: boolean;\n\n  /** Disable onClock trigger for outside events */\n  noCloseOnClickOutside?: boolean;\n\n  /** Disable onClock trigger for escape key press */\n  noCloseOnEscape?: boolean;\n\n  /** Drawer appear and disappear transition, see Transition component for full documentation */\n  transition?: MantineTransition;\n\n  /** Transition duration in ms */\n  transitionDuration?: number;\n\n  /** Drawer transitionTimingFunction css property */\n  transitionTimingFunction?: string;\n\n  /** Removes overlay entirely */\n  noOverlay?: boolean;\n\n  /** Sets overlay opacity, defaults to 0.75 in light theme and to 0.85 in dark theme */\n  overlayOpacity?: number;\n\n  /** Sets overlay color, defaults to theme.black in light theme and to theme.colors.dark[9] in dark theme */\n  overlayColor?: string;\n\n  /** Drawer title, displayed in header before close button */\n  title?: React.ReactNode;\n\n  /** Hides close button, modal still can be closed with escape key and by clicking outside */\n  hideCloseButton?: boolean;\n\n  /** Close button aria-label */\n  closeButtonLabel?: string;\n}\n\nconst transitions: Record<DrawerPosition, MantineTransition> = {\n  top: 'slide-down',\n  bottom: 'slide-up',\n  left: 'slide-right',\n  right: 'slide-left',\n};\n\nexport function MantineDrawer({\n  className,\n  style,\n  opened,\n  onClose,\n  position = 'left',\n  size = 'md',\n  noFocusTrap = false,\n  noScrollLock = false,\n  noCloseOnClickOutside = false,\n  noCloseOnEscape = false,\n  transition,\n  transitionDuration = 250,\n  transitionTimingFunction = 'ease',\n  zIndex = 1000,\n  overlayColor,\n  overlayOpacity,\n  children,\n  noOverlay = false,\n  shadow = 'md',\n  padding = 0,\n  title,\n  hideCloseButton,\n  closeButtonLabel,\n  classNames,\n  styles,\n  sx,\n  ...others\n}: DrawerProps) {\n  const theme = useMantineTheme();\n  const { classes, cx } = useStyles({ size, position }, { sx, classNames, styles, name: 'Drawer' });\n  const focusTrapRef = useFocusTrap(!noFocusTrap && opened);\n\n  const [, lockScroll] = useScrollLock();\n\n  const drawerTransition = transition || transitions[position];\n  const _overlayOpacity =\n    typeof overlayOpacity === 'number'\n      ? overlayOpacity\n      : theme.colorScheme === 'dark'\n      ? 0.85\n      : 0.75;\n\n  const closeOnEscape = (event: KeyboardEvent) => {\n    if (noFocusTrap && event.code === 'Escape' && !noCloseOnEscape) {\n      onClose();\n    }\n  };\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    // onKeyDownCapture event will not fire when focus trap is not active\n    if (noFocusTrap) {\n      window.addEventListener('keydown', closeOnEscape);\n      return () => window.removeEventListener('keydown', closeOnEscape);\n    }\n  }, [noFocusTrap]);\n\n  useFocusReturn({ opened, transitionDuration });\n\n  return (\n    <GroupedTransition\n      onExited={() => lockScroll(false)}\n      onEntered={() => lockScroll(!noScrollLock && true)}\n      mounted={opened}\n      transitions={{\n        overlay: { duration: transitionDuration / 2, transition: 'fade', timingFunction: 'ease' },\n        drawer: {\n          duration: transitionDuration,\n          transition: drawerTransition,\n          timingFunction: transitionTimingFunction,\n        },\n      }}\n    >\n      {(transitionStyles) => (\n        <div\n          className={cx(classes.root, { [classes.noOverlay]: noOverlay }, className)}\n          role=\"dialog\"\n          aria-modal\n          style={style}\n          {...others}\n        >\n          {!noCloseOnClickOutside && (\n            // eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n            <div\n              onClick={onClose}\n              className={classes.clickOutsideOverlay}\n              style={{ zIndex: zIndex + 1 }}\n            />\n          )}\n\n          <Paper<'div'>\n            className={cx(classes.drawer, className)}\n            ref={focusTrapRef}\n            style={{ ...transitionStyles.drawer, zIndex: zIndex + 2 }}\n            radius={0}\n            tabIndex={-1}\n            onKeyDownCapture={(event) => {\n              const shouldTrigger =\n                (event.target as any)?.getAttribute('data-mantine-stop-propagation') !== 'true';\n\n              shouldTrigger && event.nativeEvent.code === 'Escape' && !noCloseOnEscape && onClose();\n            }}\n            shadow={shadow}\n            padding={padding}\n          >\n            {(title || !hideCloseButton) && (\n              <div className={classes.header}>\n                <Text className={classes.title}>{title}</Text>\n\n                {!hideCloseButton && (\n                  <CloseButton iconSize={16} onClick={onClose} aria-label={closeButtonLabel} />\n                )}\n              </div>\n            )}\n            {children}\n          </Paper>\n\n          {!noOverlay && (\n            <div style={transitionStyles.overlay}>\n              <Overlay\n                opacity={_overlayOpacity}\n                zIndex={zIndex}\n                color={\n                  overlayColor ||\n                  (theme.colorScheme === 'dark' ? theme.colors.dark[9] : theme.black)\n                }\n              />\n            </div>\n          )}\n        </div>\n      )}\n    </GroupedTransition>\n  );\n}\n\nexport function Drawer(props: React.ComponentPropsWithoutRef<typeof MantineDrawer>) {\n  return (\n    <Portal zIndex={props.zIndex || 1000}>\n      <MantineDrawer {...props} />\n    </Portal>\n  );\n}\n\nDrawer.displayName = '@mantine/core/Drawer';\n"],"names":["styles","useMantineTheme","useStyles","useFocusTrap","useScrollLock","useEffect","useFocusReturn","React","GroupedTransition","Paper","Text","CloseButton","Overlay","Portal"],"mappings":"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"}