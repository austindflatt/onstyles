{"ast":null,"code":"import React, { forwardRef, useRef, useState, useEffect } from 'react';\nimport { useFocusTrap } from '@mantine/hooks';\nimport { useMantineTheme } from '@mantine/styles';\nimport { Paper } from '../../Paper/Paper.js';\nimport { Divider } from '../../Divider/Divider.js';\nimport { Text } from '../../Text/Text.js';\nimport { MenuItem } from '../MenuItem/MenuItem.js';\nimport { MenuLabel } from '../MenuLabel/MenuLabel.js';\nimport { MenuButton } from '../MenuButton/MenuButton.js';\nimport useStyles from './MenuBody.styles.js';\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nfunction getNextItem(active, items) {\n  for (let i = active + 1; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return active;\n}\n\nfunction findInitialItem(items) {\n  for (let i = 0; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction getPreviousItem(active, items) {\n  for (let i = active - 1; i >= 0; i -= 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  if (!items[active] || items[active].type !== MenuItem) {\n    return findInitialItem(items);\n  }\n\n  return active;\n}\n\nconst MenuBody = forwardRef((_a, ref) => {\n  var _b = _a,\n      {\n    className,\n    opened,\n    onClose,\n    children,\n    size = \"md\",\n    shadow = \"md\",\n    closeOnItemClick = true,\n    transitionDuration = 150,\n    classNames,\n    styles,\n    radius,\n    trapFocus = true\n  } = _b,\n      others = __objRest(_b, [\"className\", \"opened\", \"onClose\", \"children\", \"size\", \"shadow\", \"closeOnItemClick\", \"transitionDuration\", \"classNames\", \"styles\", \"radius\", \"trapFocus\"]);\n\n  const items = React.Children.toArray(children).filter(item => item.type === MenuItem || item.type === Divider || item.type === MenuLabel);\n  const hoveredTimeout = useRef();\n  const buttonsRefs = useRef({});\n  const theme = useMantineTheme();\n  const {\n    classes,\n    cx\n  } = useStyles({\n    size\n  }, {\n    classNames,\n    styles,\n    name: \"Menu\"\n  });\n  const [hovered, setHovered] = useState(-1);\n  const focusTrapRef = useFocusTrap(trapFocus);\n  useEffect(() => {\n    if (!opened) {\n      hoveredTimeout.current = window.setTimeout(() => {\n        setHovered(-1);\n      }, transitionDuration);\n    } else {\n      window.clearTimeout(hoveredTimeout.current);\n    }\n\n    return () => window.clearTimeout(hoveredTimeout.current);\n  }, [opened]);\n\n  const handleKeyDown = event => {\n    const {\n      code\n    } = event.nativeEvent;\n\n    if (code === \"Escape\") {\n      onClose();\n    }\n\n    if (code === \"Tab\" && trapFocus) {\n      event.preventDefault();\n    }\n\n    if (code === \"ArrowUp\") {\n      event.preventDefault();\n      const prevIndex = getPreviousItem(hovered, items);\n      setHovered(prevIndex);\n      buttonsRefs.current[prevIndex].focus();\n    }\n\n    if (code === \"ArrowDown\") {\n      event.preventDefault();\n      const nextIndex = getNextItem(hovered, items);\n      setHovered(nextIndex);\n      buttonsRefs.current[nextIndex].focus();\n    }\n  };\n\n  if (items.length === 0) {\n    return null;\n  }\n\n  const buttons = items.map((item, index) => {\n    if (item.type === MenuItem) {\n      return /* @__PURE__ */React.createElement(MenuButton, __spreadProps(__spreadValues({}, item.props), {\n        key: index,\n        hovered: hovered === index,\n        onHover: () => setHovered(index),\n        radius,\n        classNames,\n        styles,\n        onMouseLeave: () => setHovered(-1),\n        onClick: event => {\n          if (closeOnItemClick) {\n            onClose();\n          }\n\n          if (typeof item.props.onClick === \"function\") {\n            item.props.onClick(event);\n          }\n        },\n        ref: node => {\n          buttonsRefs.current[index] = node;\n        }\n      }));\n    }\n\n    if (item.type === MenuLabel) {\n      return /* @__PURE__ */React.createElement(Text, __spreadValues({\n        key: index,\n        className: classes.label\n      }, item.props));\n    }\n\n    if (item.type === Divider) {\n      return /* @__PURE__ */React.createElement(Divider, {\n        variant: \"solid\",\n        className: classes.divider,\n        my: theme.spacing.xs / 2,\n        key: index\n      });\n    }\n\n    return null;\n  });\n  return /* @__PURE__ */React.createElement(Paper, __spreadValues({\n    shadow,\n    className: cx(classes.body, className),\n    onKeyDownCapture: handleKeyDown,\n    role: \"menu\",\n    \"aria-orientation\": \"vertical\",\n    radius,\n    onMouseLeave: () => setHovered(-1),\n    ref\n  }, others), /* @__PURE__ */React.createElement(\"div\", {\n    ref: focusTrapRef\n  }, buttons));\n});\nMenuBody.displayName = \"@mantine/core/MenuBody\";\nexport { MenuBody };","map":{"version":3,"sources":["../../../../src/components/Menu/MenuBody/MenuBody.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, forwardRef } from 'react';\nimport { useFocusTrap } from '@mantine/hooks';\nimport {\n  useMantineTheme,\n  DefaultProps,\n  MantineNumberSize,\n  MantineShadow,\n  ClassNames,\n} from '@mantine/styles';\nimport { MantineTransition } from '../../Transition';\nimport { Paper } from '../../Paper/Paper';\nimport { Divider } from '../../Divider/Divider';\nimport { Text } from '../../Text/Text';\nimport { MenuItem, MenuItemType } from '../MenuItem/MenuItem';\nimport { MenuLabel } from '../MenuLabel/MenuLabel';\nimport { MenuButton, MenuButtonStylesNames } from '../MenuButton/MenuButton';\nimport useStyles from './MenuBody.styles';\n\nexport type MenuBodyStylesNames = ClassNames<typeof useStyles> | MenuButtonStylesNames;\n\nexport interface MenuBodyProps\n  extends DefaultProps<MenuBodyStylesNames>,\n    React.ComponentPropsWithoutRef<'div'> {\n  /** When true menu is mounted to the dom */\n  opened: boolean;\n\n  /** Triggers when menu is closed */\n  onClose(): void;\n\n  /** <MenuItem /> and <Divider /> components only */\n  children: React.ReactNode;\n\n  /** Transition styles */\n  transition?: MantineTransition;\n\n  /** Transitions duration in ms */\n  transitionDuration?: number;\n\n  /** Transition timing function */\n  transitionTimingFunction?: string;\n\n  /** Predefined menu width or number for width in px */\n  size?: MantineNumberSize;\n\n  /** Predefined shadow from theme or box-shadow value */\n  shadow?: MantineShadow;\n\n  /** Should menu close on outside click */\n  closeOnClickOutside?: boolean;\n\n  /** Should menu close on item click */\n  closeOnItemClick?: boolean;\n\n  /** Body border-radius */\n  radius?: MantineNumberSize;\n\n  /** Trap focus inside menu */\n  trapFocus?: boolean;\n}\n\nfunction getNextItem(active: number, items: MenuItemType[]) {\n  for (let i = active + 1; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return active;\n}\n\nfunction findInitialItem(items: MenuItemType[]) {\n  for (let i = 0; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction getPreviousItem(active: number, items: MenuItemType[]) {\n  for (let i = active - 1; i >= 0; i -= 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  if (!items[active] || items[active].type !== MenuItem) {\n    return findInitialItem(items);\n  }\n\n  return active;\n}\n\nexport const MenuBody = forwardRef<HTMLDivElement, MenuBodyProps>(\n  (\n    {\n      className,\n      opened,\n      onClose,\n      children,\n      size = 'md',\n      shadow = 'md',\n      closeOnItemClick = true,\n      transitionDuration = 150,\n      classNames,\n      styles,\n      radius,\n      trapFocus = true,\n      ...others\n    }: MenuBodyProps,\n    ref\n  ) => {\n    const items = React.Children.toArray(children).filter(\n      (item: MenuItemType) =>\n        item.type === MenuItem || item.type === Divider || item.type === MenuLabel\n    ) as MenuItemType[];\n\n    const hoveredTimeout = useRef<number>();\n    const buttonsRefs = useRef<Record<string, HTMLButtonElement>>({});\n    const theme = useMantineTheme();\n    const { classes, cx } = useStyles({ size }, { classNames, styles, name: 'Menu' });\n    const [hovered, setHovered] = useState(-1);\n    const focusTrapRef = useFocusTrap(trapFocus);\n\n    useEffect(() => {\n      if (!opened) {\n        hoveredTimeout.current = window.setTimeout(() => {\n          setHovered(-1);\n        }, transitionDuration);\n      } else {\n        window.clearTimeout(hoveredTimeout.current);\n      }\n\n      return () => window.clearTimeout(hoveredTimeout.current);\n    }, [opened]);\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n      const { code } = event.nativeEvent;\n\n      if (code === 'Escape') {\n        onClose();\n      }\n\n      if (code === 'Tab' && trapFocus) {\n        event.preventDefault();\n      }\n\n      if (code === 'ArrowUp') {\n        event.preventDefault();\n        const prevIndex = getPreviousItem(hovered, items);\n        setHovered(prevIndex);\n        buttonsRefs.current[prevIndex].focus();\n      }\n\n      if (code === 'ArrowDown') {\n        event.preventDefault();\n        const nextIndex = getNextItem(hovered, items);\n        setHovered(nextIndex);\n        buttonsRefs.current[nextIndex].focus();\n      }\n    };\n\n    if (items.length === 0) {\n      return null;\n    }\n\n    const buttons = items.map((item, index) => {\n      if (item.type === MenuItem) {\n        return (\n          <MenuButton<'button'>\n            {...item.props}\n            key={index}\n            hovered={hovered === index}\n            onHover={() => setHovered(index)}\n            radius={radius}\n            classNames={classNames}\n            styles={styles}\n            onMouseLeave={() => setHovered(-1)}\n            onClick={(event) => {\n              if (closeOnItemClick) {\n                onClose();\n              }\n\n              if (typeof item.props.onClick === 'function') {\n                item.props.onClick(event);\n              }\n            }}\n            ref={(node) => {\n              buttonsRefs.current[index] = node;\n            }}\n          />\n        );\n      }\n\n      if (item.type === MenuLabel) {\n        return <Text key={index} className={classes.label} {...(item.props as any)} />;\n      }\n\n      if (item.type === Divider) {\n        return (\n          <Divider\n            variant=\"solid\"\n            className={classes.divider}\n            my={theme.spacing.xs / 2}\n            key={index}\n          />\n        );\n      }\n\n      return null;\n    });\n\n    return (\n      <Paper\n        shadow={shadow}\n        className={cx(classes.body, className)}\n        onKeyDownCapture={handleKeyDown}\n        role=\"menu\"\n        aria-orientation=\"vertical\"\n        radius={radius}\n        onMouseLeave={() => setHovered(-1)}\n        ref={ref}\n        {...others}\n      >\n        <div ref={focusTrapRef}>{buttons}</div>\n      </Paper>\n    );\n  }\n);\n\nMenuBody.displayName = '@mantine/core/MenuBody';\n"]},"metadata":{},"sourceType":"module"}